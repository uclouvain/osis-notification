{"version":3,"file":"osis-notification.umd.min.js","sources":["../../../node_modules/html-truncate/lib/truncate.js","../../../frontend/components/TruncateHtml.vue","../../../frontend/components/NotificationEntry.vue","../../../frontend/utils.ts","../../../frontend/NotificationViewer.vue","../../../frontend/i18n.ts","../../../frontend/main.ts"],"sourcesContent":["/**\n * Truncate HTML string and keep tag safe.\n *\n * @method truncate\n * @param {String} string string needs to be truncated\n * @param {Number} maxLength length of truncated string\n * @param {Object} options (optional)\n * @param {Boolean} [options.keepImageTag] flag to specify if keep image tag, false by default\n * @param {Boolean} [options.truncateLastWord] truncates last word, true by default\n * @param {Number} [options.slop] tolerance when options.truncateLastWord is false before we give up and just truncate at the maxLength position, 10 by default (but not greater than maxLength)\n * @param {Boolean|String} [options.ellipsis] omission symbol for truncated string, '...' by default\n * @return {String} truncated string\n */\nfunction truncate(string, maxLength, options) {\n    var EMPTY_OBJECT = {},\n        EMPTY_STRING = '',\n        DEFAULT_TRUNCATE_SYMBOL = '...',\n        DEFAULT_SLOP = 10 > maxLength ? maxLength : 10,\n        EXCLUDE_TAGS = ['img', 'br'],   // non-closed tags\n        items = [],                     // stack for saving tags\n        total = 0,                      // record how many characters we traced so far\n        content = EMPTY_STRING,         // truncated text storage\n        KEY_VALUE_REGEX = '([\\\\w|-]+\\\\s*(=\\\\s*\"[^\"]*\")?\\\\s*)*',\n        IS_CLOSE_REGEX = '\\\\s*\\\\/?\\\\s*',\n        CLOSE_REGEX = '\\\\s*\\\\/\\\\s*',\n        SELF_CLOSE_REGEX = new RegExp('<\\\\/?\\\\w+\\\\s*' + KEY_VALUE_REGEX + CLOSE_REGEX + '>'),\n        HTML_TAG_REGEX = new RegExp('<\\\\/?\\\\w+\\\\s*' + KEY_VALUE_REGEX + IS_CLOSE_REGEX + '>'),\n        URL_REGEX = /(((ftp|https?):\\/\\/)[\\-\\w@:%_\\+.~#?,&\\/\\/=]+)|((mailto:)?[_.\\w\\-]+@([\\w][\\w\\-]+\\.)+[a-zA-Z]{2,3})/g, // Simple regexp\n        IMAGE_TAG_REGEX = new RegExp('<img\\\\s*' + KEY_VALUE_REGEX + IS_CLOSE_REGEX + '>'),\n        WORD_BREAK_REGEX = new RegExp('\\\\W+', 'g'),\n        matches = true,\n        result,\n        index,\n        tail,\n        tag,\n        selfClose;\n\n    /**\n     * Remove image tag\n     *\n     * @private\n     * @method _removeImageTag\n     * @param {String} string not-yet-processed string\n     * @return {String} string without image tags\n     */\n    function _removeImageTag(string) {\n        var match = IMAGE_TAG_REGEX.exec(string),\n            index,\n            len;\n\n        if (!match) {\n            return string;\n        }\n\n        index = match.index;\n        len = match[0].length;\n\n        return string.substring(0, index) + string.substring(index + len);\n    }\n\n    /**\n     * Dump all close tags and append to truncated content while reaching upperbound\n     *\n     * @private\n     * @method _dumpCloseTag\n     * @param {String[]} tags a list of tags which should be closed\n     * @return {String} well-formatted html\n     */\n    function _dumpCloseTag(tags) {\n        var html = '';\n\n        tags.reverse().forEach(function (tag, index) {\n            // dump non-excluded tags only\n            if (-1 === EXCLUDE_TAGS.indexOf(tag)) {\n                html += '</' + tag + '>';\n            }\n        });\n\n        return html;\n    }\n\n    /**\n     * Process tag string to get pure tag name\n     *\n     * @private\n     * @method _getTag\n     * @param {String} string original html\n     * @return {String} tag name\n     */\n    function _getTag(string) {\n        var tail = string.indexOf(' ');\n\n        // TODO:\n        // we have to figure out how to handle non-well-formatted HTML case\n        if (-1 === tail) {\n            tail = string.indexOf('>');\n            if (-1 === tail) {\n                throw new Error('HTML tag is not well-formed : ' + string);\n            }\n        }\n\n        return string.substring(1, tail);\n    }\n\n\n    /**\n     * Get the end position for String#substring()\n     *\n     * If options.truncateLastWord is FALSE, we try to the end position up to\n     * options.slop characters to avoid breaking in the middle of a word.\n     *\n     * @private\n     * @method _getEndPosition\n     * @param {String} string original html\n     * @param {Number} tailPos (optional) provided to avoid extending the slop into trailing HTML tag\n     * @return {Number} maxLength\n     */\n    function _getEndPosition (string, tailPos) {\n        var defaultPos = maxLength - total,\n            position = defaultPos,\n            isShort = defaultPos < options.slop,\n            slopPos = isShort ? defaultPos : options.slop - 1,\n            substr,\n            startSlice = isShort ? 0 : defaultPos - options.slop,\n            endSlice = tailPos || (defaultPos + options.slop),\n            result;\n\n        if (!options.truncateLastWord) {\n\n            substr = string.slice(startSlice, endSlice);\n\n            if (tailPos && substr.length <= tailPos) {\n                position = substr.length;\n            }\n            else {\n                while ((result = WORD_BREAK_REGEX.exec(substr)) !== null) {\n                    // a natural break position before the hard break position\n                    if (result.index < slopPos) {\n                        position = defaultPos - (slopPos - result.index);\n                        // keep seeking closer to the hard break position\n                        // unless a natural break is at position 0\n                        if (result.index === 0 && defaultPos <= 1) break;\n                    }\n                    // a natural break position exactly at the hard break position\n                    else if (result.index === slopPos) {\n                        position = defaultPos;\n                        break; // seek no more\n                    }\n                    // a natural break position after the hard break position\n                    else {\n                        position = defaultPos + (result.index - slopPos);\n                        break;  // seek no more\n                    }\n                }\n            }\n            if (string.charAt(position - 1).match(/\\s$/)) position--;\n        }\n        return position;\n    }\n\n    options = options || EMPTY_OBJECT;\n    options.ellipsis = (undefined !== options.ellipsis) ? options.ellipsis : DEFAULT_TRUNCATE_SYMBOL;\n    options.truncateLastWord = (undefined !== options.truncateLastWord) ? options.truncateLastWord : true;\n    options.slop = (undefined !== options.slop) ? options.slop : DEFAULT_SLOP;\n\n    while (matches) {\n        matches = HTML_TAG_REGEX.exec(string);\n\n        if (!matches) {\n            if (total >= maxLength) { break; }\n\n            matches = URL_REGEX.exec(string);\n            if (!matches || matches.index >= maxLength) {\n                content += string.substring(0, _getEndPosition(string));\n                break;\n            }\n\n            while (matches) {\n                result = matches[0];\n                index = matches.index;\n                content += string.substring(0, (index + result.length) - total);\n                string = string.substring(index + result.length);\n                matches = URL_REGEX.exec(string);\n            }\n            break;\n        }\n\n        result = matches[0];\n        index = matches.index;\n\n        if (total + index > maxLength) {\n            // exceed given `maxLength`, dump everything to clear stack\n            content += string.substring(0, _getEndPosition(string, index));\n            break;\n        } else {\n            total += index;\n            content += string.substring(0, index);\n        }\n\n        if ('/' === result[1]) {\n            // move out open tag\n            items.pop();\n            selfClose=null;\n        } else {\n            selfClose = SELF_CLOSE_REGEX.exec(result);\n            if (!selfClose) {\n                tag = _getTag(result);\n\n                items.push(tag);\n            }\n        }\n\n        if (selfClose) {\n            content += selfClose[0];\n        } else {\n            content += result;\n        }\n        string = string.substring(index + result.length);\n    }\n\n    if (string.length > maxLength - total && options.ellipsis) {\n        content += options.ellipsis;\n    }\n    content += _dumpCloseTag(items);\n\n    if (!options.keepImageTag) {\n        content = _removeImageTag(content);\n    }\n\n    return content;\n}\n\nmodule.exports = truncate;\n","<!--\n  -\n  - OSIS stands for Open Student Information System. It's an application\n  - designed to manage the core business of higher education institutions,\n  - such as universities, faculties, institutes and professional schools.\n  - The core business involves the administration of students, teachers,\n  - courses, programs and so on.\n  -\n  - Copyright (C) 2015-2023 Université catholique de Louvain (http://www.uclouvain.be)\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU General Public License as published by\n  - the Free Software Foundation, either version 3 of the License, or\n  - (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU General Public License for more details.\n  -\n  - A copy of this license - GNU General Public License - is available\n  - at the root of the source code of this program.  If not,\n  - see http://www.gnu.org/licenses/.\n  -\n  -->\n\n<template>\n  <div :class=\"containerCssClass\">\n    <div\n        :class=\"[isTruncated ? 'truncated' : '', contentCssClass]\"\n        v-html=\"isTruncated ? truncatedHtml : htmlText\"\n    />\n    <button\n        v-if=\"truncatedHtml.length < htmlText.length\"\n        :class=\"buttonCssClass\"\n        @click.prevent=\"isTruncated = !isTruncated\"\n    >\n      {{ isTruncated ? moreButtonText : lessButtonText }}\n    </button>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from 'vue';\nimport truncate from 'html-truncate';\n\nexport default defineComponent({\n  name: 'TruncateHtml',\n  props: {\n    htmlText: {\n      type: String,\n      default: '',\n    },\n    length: {\n      type: Number,\n      default: 100,\n    },\n    lessButtonText: {\n      type: String,\n      default: \"Show less\",\n    },\n    contentCssClass: {\n      type: String,\n      default: \"\",\n    },\n    containerCssClass: {\n      type: String,\n      default: \"\",\n    },\n    buttonCssClass: {\n      type: String,\n      default: \"\",\n    },\n    moreButtonText: {\n      type: String,\n      default: \"Show more\",\n    },\n  },\n  data() {\n    return {\n      isTruncated: true,\n      truncatedHtml: truncate(this.htmlText, this.length),\n    };\n  },\n});\n</script>\n","<!--\n  -\n  -   OSIS stands for Open Student Information System. It's an application\n  -   designed to manage the core business of higher education institutions,\n  -   such as universities, faculties, institutes and professional schools.\n  -   The core business involves the administration of students, teachers,\n  -   courses, programs and so on.\n  -\n  -   Copyright (C) 2015-2021 Université catholique de Louvain (http://www.uclouvain.be)\n  -\n  -   This program is free software: you can redistribute it and/or modify\n  -   it under the terms of the GNU General Public License as published by\n  -   the Free Software Foundation, either version 3 of the License, or\n  -   (at your option) any later version.\n  -\n  -   This program is distributed in the hope that it will be useful,\n  -   but WITHOUT ANY WARRANTY; without even the implied warranty of\n  -   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  -   GNU General Public License for more details.\n  -\n  -   A copy of this license - GNU General Public License - is available\n  -   at the root of the source code of this program.  If not,\n  -   see http://www.gnu.org/licenses/.\n  -\n  -->\n<template>\n  <li class=\"notification-dropdown-item\">\n    <input\n        :id=\"`notification-${uuid}`\"\n        :checked=\"isSent\"\n        type=\"radio\"\n        data-toggle=\"tooltip\"\n        :data-original-title=\"isSent ? $t('notification.mark_as_read') : $t('notification.mark_as_unread')\"\n        @click.prevent=\"$emit('toggle', uuid)\"\n    >\n    <span class=\"label label-primary\">{{ sentAt }}</span>\n    <TruncateHtml\n        button-css-class=\"btn btn-link\"\n        container-css-class=\"notification-text\"\n        :content-css-class=\"isSent ? 'font-bold' : ''\"\n        :html-text=\"payload\"\n        :length=\"truncateLength\"\n        :less-button-text=\"$t('notification.show_less')\"\n        :more-button-text=\"$t('notification.show_more')\"\n    />\n  </li>\n</template>\n\n<script lang=\"ts\">\nimport TruncateHtml from './TruncateHtml.vue';\nimport {defineComponent} from \"vue\";\nimport type jQuery from \"jquery\";\n\ndeclare global {\n  interface Window {\n    jQuery: typeof jQuery;\n  }\n}\n\nexport default defineComponent({\n  name: 'NotificationEntry',\n  components: {TruncateHtml},\n  props: {\n    uuid: {\n      type: String,\n      required: true,\n    },\n    state: {\n      type: String,\n      required: true,\n    },\n    sentAt: {\n      type: String,\n      required: true,\n    },\n    payload: {\n      type: String,\n      required: true,\n    },\n    truncateLength: {\n      type: Number,\n      default: 60,\n    },\n  },\n  emits: ['toggle'],\n  computed: {\n    isSent: function () {\n      return this.state === 'SENT_STATE';\n    },\n  },\n  mounted() {\n    // activate the tooltips\n    window.jQuery('[data-toggle=\"tooltip\"]').tooltip({\n      trigger: 'hover',\n      placement: 'top',\n      container: 'body',\n      template: '<div class=\"tooltip tooltip-notification\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',\n    });\n  },\n  updated() {\n    // hide the bootstrap input radio tooltip on click\n    window.jQuery(`#notification-${this.uuid}`).tooltip('hide');\n  },\n  beforeUnmount() {\n    // hide the bootstrap input radio tooltip on click\n    window.jQuery(`#notification-${this.uuid}`).tooltip('destroy');\n  },\n});\n</script>\n\n<style lang=\"scss\">\n.notification-dropdown-item {\n  &:hover {\n    background-color: #f5f5f5;\n  }\n\n  .label {\n    margin-left: 1em;\n    margin-right: 1em;\n    margin-top: .2em;\n    float: left;\n  }\n\n  input[type=radio] {\n    cursor: pointer;\n    float: left;\n  }\n\n  .notification-text {\n    display: block;\n    white-space: initial;\n    margin: 1em 1em 1em 1.7em;\n  }\n\n  .notification-text > div.truncated {\n    display: inline;\n  }\n}\n\n.tooltip-notification .tooltip-inner {\n  width: auto;\n}\n\n.font-bold {\n  font-weight: bold;\n}\n</style>\n","/*\n *\n *   OSIS stands for Open Student Information System. It's an application\n *   designed to manage the core business of higher education institutions,\n *   such as universities, faculties, institutes and professional schools.\n *   The core business involves the administration of students, teachers,\n *   courses, programs and so on.\n *\n *   Copyright (C) 2015-2021 Université catholique de Louvain (http://www.uclouvain.be)\n *\n *   This program is free software: you can redistribute it and/or modify\n *   it under the terms of the GNU General Public License as published by\n *   the Free Software Foundation, either version 3 of the License, or\n *   (at your option) any later version.\n *\n *   This program is distributed in the hope that it will be useful,\n *   but WITHOUT ANY WARRANTY; without even the implied warranty of\n *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n *   GNU General Public License for more details.\n *\n *   A copy of this license - GNU General Public License - is available\n *   at the root of the source code of this program.  If not,\n *   see http://www.gnu.org/licenses/.\n *\n */\n\n\n/**\n * Get the given cookie from its name. We use it to get the csrftoken.\n * See code from https://docs.djangoproject.com/en/3.2/ref/csrf/#acquiring-the-token-if-csrf-use-sessions-and-csrf-cookie-httponly-are-false\n */\nexport function getCookie(name: string): string {\n  if (document.cookie) {\n    const cookies = document.cookie.split(';');\n    for (let i = 0; i < cookies.length; i++) {\n      const cookie = cookies[i].trim();\n      // Does this cookie string begin with the name we want?\n      if (cookie.substring(0, name.length + 1) === (name + '=')) {\n        return decodeURIComponent(cookie.substring(name.length + 1));\n      }\n    }\n  }\n  throw new Error(`No such cookie ${name}`);\n}\n","<!--\n  -\n  -   OSIS stands for Open Student Information System. It's an application\n  -   designed to manage the core business of higher education institutions,\n  -   such as universities, faculties, institutes and professional schools.\n  -   The core business involves the administration of students, teachers,\n  -   courses, programs and so on.\n  -\n  -   Copyright (C) 2015-2021 Université catholique de Louvain (http://www.uclouvain.be)\n  -\n  -   This program is free software: you can redistribute it and/or modify\n  -   it under the terms of the GNU General Public License as published by\n  -   the Free Software Foundation, either version 3 of the License, or\n  -   (at your option) any later version.\n  -\n  -   This program is distributed in the hope that it will be useful,\n  -   but WITHOUT ANY WARRANTY; without even the implied warranty of\n  -   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  -   GNU General Public License for more details.\n  -\n  -   A copy of this license - GNU General Public License - is available\n  -   at the root of the source code of this program.  If not,\n  -   see http://www.gnu.org/licenses/.\n  -\n  -->\n<template>\n  <a\n      class=\"dropdown-toggle\"\n      data-toggle=\"dropdown\"\n      role=\"button\"\n      aria-haspopup=\"true\"\n      aria-expanded=\"false\"\n      @click=\"animationEnabled = false\"\n  >\n    <div\n        class=\"bell\"\n        :data-count=\"unreadNotificationsCount\"\n        :class=\"{'show-count': unreadNotificationsCount, 'notify': (unreadNotificationsCount && animationEnabled)}\"\n    >\n      <span class=\"fas fa-bell\" />\n    </div>\n  </a>\n  <ul class=\"dropdown-menu notification-dropdown\">\n    <li\n        v-if=\"loading\"\n        class=\"progress\"\n    >\n      <div\n          class=\"progress-bar progress-bar-striped active\"\n          role=\"progressbar\"\n          aria-valuenow=\"100\"\n          aria-valuemin=\"0\"\n          aria-valuemax=\"100\"\n          style=\"width: 100%\"\n      >\n        <span class=\"sr-only\">\n          {{ $t('notification_viewer.loading') }}\n        </span>\n      </div>\n    </li>\n    <template v-else-if=\"error\">\n      <li\n          role=\"separator\"\n          class=\"divider\"\n      />\n      <li>\n        <div\n            class=\"alert alert-warning\"\n            role=\"alert\"\n        >\n          {{ error }}\n        </div>\n      </li>\n    </template>\n    <li v-if=\"!notifications.length\">\n      {{ $t('notification_viewer.no_notifications') }}\n    </li>\n    <template v-else>\n      <li>\n        <a\n            class=\"btn\"\n            :class=\"{ disabled: !unreadNotificationsCount }\"\n            @click=\"markAllAsRead\"\n        >\n          {{ $t('notification_viewer.mark_all_as_read') }}\n        </a>\n      </li>\n      <li\n          role=\"separator\"\n          class=\"divider\"\n      />\n      <NotificationEntry\n          v-for=\"notification in notifications\"\n          :key=\"notification.uuid\"\n          :uuid=\"notification.uuid\"\n          :state=\"notification.state\"\n          :sent-at=\"notification.sent_at\"\n          :payload=\"notification.payload\"\n          :truncate-length=\"truncateLength\"\n          @toggle=\"toggleState\"\n      />\n      <li\n          v-if=\"hasNextPage\"\n          class=\"text-center\"\n      >\n        <button\n            type=\"button\"\n            class=\"btn btn-link\"\n            @click=\"loadMore\"\n        >\n          {{ $t('notification_viewer.load_more') }}\n        </button>\n      </li>\n    </template>\n  </ul>\n</template>\n\n<script lang=\"ts\">\nimport NotificationEntry from './components/NotificationEntry.vue';\nimport {getCookie} from './utils';\nimport {defineComponent} from \"vue\";\nimport type {EntriesResponse, EntryRecord} from \"./interfaces\";\n\ndeclare global {\n  interface Window {\n    jQuery: typeof jQuery;\n  }\n}\n\nexport default defineComponent({\n  name: 'NotificationViewer',\n  components: {NotificationEntry},\n  props: {\n    baseUrl: {\n      type: String,\n      required: true,\n    },\n    interval: {\n      type: Number,\n      default: 300,\n    },\n    limit: {\n      type: Number,\n      default: 15,\n    },\n    truncateLength: {\n      type: Number,\n      default: 60,\n    },\n  },\n  data() {\n    return {\n      notifications: [] as EntryRecord[],\n      hasNextPage: false,\n      animationEnabled: false,\n      pageSize: this.limit,\n      error: '',\n      loading: true,\n      unreadNotificationsCount: 0,\n      timer: 0,\n      csrfToken: getCookie('csrftoken'),\n    };\n  },\n  unmounted() {\n    window.clearTimeout(this.timer);\n  },\n  mounted() {\n    void this.fetchNotifications();\n    // This next line let the dropdown menu open after clicking inside it. See the bootstrap source code here:\n    // https://github.com/twbs/bootstrap/blob/0b9c4a4007c44201dce9a6cc1a38407005c26c86/js/dropdown.js#L160\n    jQuery(document).on('click.bs.dropdown.data-api', '.notification-dropdown', e => e.stopPropagation());\n  },\n  methods: {\n    fetchNotifications: async function () {\n      const newNotifications = await this.doRequest(`?limit=${this.pageSize}`, {}, true) as EntriesResponse | null;\n      if (!newNotifications) return;\n      if (newNotifications.unread_count) {\n        this.animationEnabled = true;\n      }\n      this.notifications = newNotifications.results;\n      this.hasNextPage = !!newNotifications.next;\n      this.unreadNotificationsCount = newNotifications.unread_count;\n      this.timer = window.setTimeout(() => void this.fetchNotifications(), this.interval * 1000);\n    },\n    toggleState: async function (uuid: string) {\n      const newNotification = await this.doRequest(uuid, {method: 'PATCH'}) as EntryRecord | null;\n      if (!newNotification) return;\n      const notificationIndex = this.notifications.findIndex((notification) => notification.uuid === uuid);\n      this.notifications[notificationIndex] = newNotification;\n      // update unread notifications count\n      if (newNotification.state === 'SENT_STATE') {\n        this.unreadNotificationsCount++;\n      } else {\n        this.unreadNotificationsCount--;\n      }\n      // if all the notifications are read and there is still unread notification, fetch all the notifications\n      // to display the ones that are not read first.\n      if (this.notifications.filter(n => n.state === 'SENT_STATE').length !== this.unreadNotificationsCount) {\n        await this.fetchNotifications();\n      }\n    },\n    markAllAsRead: async function () {\n      const notifications = await this.doRequest('mark_all_as_read', {method: 'PUT'}) as EntryRecord[] | null;\n      if (notifications && notifications.length > 0) {\n        this.notifications.forEach(notification => notification.state = \"READ_STATE\");\n        this.unreadNotificationsCount = 0;\n      }\n    },\n    /**\n     * We use the ?limit to get new tasks when clicking on the 'Load more' button as we need to keep all the previous\n     * tasks and add the new ones. All this will be override by the setInterval that fetch all the async tasks if we\n     * use the ?offset. So it may generate a big request, but it is very unlikely.\n     */\n    loadMore: async function (e: Event) {\n      e.stopPropagation();\n      this.loading = true;\n      this.pageSize += this.limit;\n      await this.fetchNotifications();\n    },\n    doRequest: async function (url: string, params: object, loadingAnimation = false) {\n      loadingAnimation && (this.loading = true);\n      try {\n        const response = await fetch(`${this.baseUrl}${url}`, {\n          mode: 'same-origin',\n          headers: {\n            'Content-Type': 'application/json;charset=utf-8',\n            'X-CSRFToken': this.csrfToken,\n          },\n          ...params,\n        });\n        if (response.status >= 200 && response.status < 300) {\n          loadingAnimation && (this.loading = false);\n          return response.json();\n        } else {\n          this.error = `${this.$t('notification_viewer.error')}  (${response.statusText})`;\n        }\n      } catch (e) {\n        this.error = `${this.$t('notification_viewer.error')} (${(e as Error).message})`;\n      }\n      loadingAnimation && (this.loading = false);\n    },\n  },\n});\n</script>\n\n<style lang=\"scss\">\n#notification-viewer {\n  .alert.alert-warning {\n    margin-top: 20px;\n  }\n\n  .notification-dropdown {\n    min-width: 500px;\n    padding: 15px;\n    overflow-y: scroll;\n    max-height: 320px;\n  }\n}\n\n//-------------------------------------------------\n// Code from https://codepen.io/ryanmorr/pen/RPZZjd\n.bell {\n  display: inline-block;\n  position: relative;\n\n  &::before,\n  &::after {\n    color: #777;\n    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n  }\n\n  &::after { // notification count\n    font-family: Arial sans-serif;\n    font-size: 0.8em;\n    font-weight: 700;\n    position: absolute;\n    top: -10px;\n    right: -15px;\n    padding: 1px 3px;\n    line-height: 100%;\n    border: 2px #fff solid;\n    border-radius: 60px;\n    background: #db3434;\n    opacity: 0;\n    content: attr(data-count);\n    transform: scale(0.5);\n    transition: transform, opacity;\n    transition-duration: 0.3s;\n    transition-timing-function: ease-out;\n    color: #fff;\n    z-index: 2;\n  }\n\n  &.notify span {\n    animation: ring 1.5s ease;\n    animation-iteration-count: infinite;\n  }\n\n  &.show-count::after {\n    transform: scale(1);\n    opacity: 1;\n  }\n\n  @keyframes ring {\n    0% {\n      transform: rotate(35deg);\n    }\n    12.5% {\n      transform: rotate(-30deg);\n    }\n    25% {\n      transform: rotate(25deg);\n    }\n    37.5% {\n      transform: rotate(-20deg);\n    }\n    50% {\n      transform: rotate(15deg);\n    }\n    62.5% {\n      transform: rotate(-10deg);\n    }\n    75% {\n      transform: rotate(5deg);\n    }\n    100% {\n      transform: rotate(0deg);\n    }\n  }\n}\n\n//-------------------------------------------------\n</style>\n","/*\n *\n *   OSIS stands for Open Student Information System. It's an application\n *   designed to manage the core business of higher education institutions,\n *   such as universities, faculties, institutes and professional schools.\n *   The core business involves the administration of students, teachers,\n *   courses, programs and so on.\n *\n *   Copyright (C) 2015-2021 Université catholique de Louvain (http://www.uclouvain.be)\n *\n *   This program is free software: you can redistribute it and/or modify\n *   it under the terms of the GNU General Public License as published by\n *   the Free Software Foundation, either version 3 of the License, or\n *   (at your option) any later version.\n *\n *   This program is distributed in the hope that it will be useful,\n *   but WITHOUT ANY WARRANTY; without even the implied warranty of\n *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n *   GNU General Public License for more details.\n *\n *   A copy of this license - GNU General Public License - is available\n *   at the root of the source code of this program.  If not,\n *   see http://www.gnu.org/licenses/.\n *\n */\n\nimport {createI18n} from 'vue-i18n';\nimport fr from \"./locales/fr\";\nimport en from \"./locales/en\";\n\nexport const i18n = createI18n({\n  locale: document.documentElement.lang || 'en',\n  messages: {\n    en,\n    fr,\n  },\n});\n","/*\n *\n *   OSIS stands for Open Student Information System. It's an application\n *   designed to manage the core business of higher education institutions,\n *   such as universities, faculties, institutes and professional schools.\n *   The core business involves the administration of students, teachers,\n *   courses, programs and so on.\n *\n *   Copyright (C) 2015-2021 Université catholique de Louvain (http://www.uclouvain.be)\n *\n *   This program is free software: you can redistribute it and/or modify\n *   it under the terms of the GNU General Public License as published by\n *   the Free Software Foundation, either version 3 of the License, or\n *   (at your option) any later version.\n *\n *   This program is distributed in the hope that it will be useful,\n *   but WITHOUT ANY WARRANTY; without even the implied warranty of\n *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n *   GNU General Public License for more details.\n *\n *   A copy of this license - GNU General Public License - is available\n *   at the root of the source code of this program.  If not,\n *   see http://www.gnu.org/licenses/.\n *\n */\n/* eslint-disable vue/prefer-import-from-vue */\nimport {createApp} from '@vue/runtime-dom'; // to allow to be spied on\nimport NotificationViewer from './NotificationViewer.vue';\nimport {i18n} from './i18n';\n\ninterface Props extends Record<string, unknown> {\n  baseUrl: string,\n  interval?: number,\n  limit?: number,\n  truncateLength?: number,\n}\n\ndocument.querySelectorAll<HTMLElement>('#notification-viewer').forEach((elem) => {\n  const props: Props = {baseUrl: \"\", ...elem.dataset};\n  if (elem.dataset.interval) {\n    props.interval = Number.parseInt(elem.dataset.interval);\n  }\n  if (elem.dataset.limit) {\n    props.limit = Number.parseInt(elem.dataset.limit);\n  }\n  if (elem.dataset.truncateLength) {\n    props.truncateLength = Number.parseInt(elem.dataset.truncateLength);\n  }\n  createApp(NotificationViewer, props).use(i18n).mount(elem);\n});\n"],"names":["truncate","string","maxLength","options","EMPTY_OBJECT","EMPTY_STRING","DEFAULT_TRUNCATE_SYMBOL","DEFAULT_SLOP","EXCLUDE_TAGS","items","total","content","KEY_VALUE_REGEX","IS_CLOSE_REGEX","CLOSE_REGEX","SELF_CLOSE_REGEX","HTML_TAG_REGEX","URL_REGEX","IMAGE_TAG_REGEX","WORD_BREAK_REGEX","matches","result","index","tag","selfClose","_removeImageTag","match","len","_dumpCloseTag","tags","html","_getTag","tail","_getEndPosition","tailPos","defaultPos","position","isShort","slopPos","substr","startSlice","endSlice","truncate_1","_sfc_main$2","defineComponent","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","_normalizeClass","_createElementVNode","_hoisted_1","_openBlock","_withModifiers","$event","_sfc_main$1","TruncateHtml","_resolveComponent","_createElementBlock","_hoisted_2","_hoisted_3","_toDisplayString","_createVNode","_component_TruncateHtml","getCookie","name","cookies","i","cookie","_sfc_main","NotificationEntry","newNotifications","uuid","newNotification","notificationIndex","notification","n","notifications","url","params","loadingAnimation","response","e","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_Fragment","_hoisted_4","_createCommentVNode","args","_renderList","_createBlock","_component_NotificationEntry","i18n","createI18n","en","fr","elem","props","createApp","NotificationViewer"],"mappings":"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","x_google_ignoreList":[0]}